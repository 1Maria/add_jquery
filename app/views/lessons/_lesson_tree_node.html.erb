<div class="lesson-tree-node">
  <i class="fa fa-compass" style="color: <%= level_color(depth) %>;"></i>
  <span class="label <%= (lesson.meeting_lessons.blank? ? "label-muted" : "label-info") %>"><%= lesson.name %></span>
</div>

<div class="lesson-tree-level">
  <% lesson.child_lessons.each do |l| %>
    <%= render partial: "lesson_tree_node", locals: {lesson: l, depth: depth+1} %>
  <% end %>
  <div>
    <%= link_to '<i class="fa fa-plus"></i> Add Lesson'.html_safe, new_lesson_path(course_id: @course.id, parent_lesson_id: lesson.id), style: "color: #{level_color(depth+1)};" %>
  </div>
</div>